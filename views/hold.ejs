<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>Edit page??</title>
</head>
<body>
   
    <h1>edit.ejs</h1>

    <div class="editPost">
        <form action="/updatePostById/<%= post.id %>?_method=PUT" method="POST"> 

        <label for="poster"> Edit title:</label>  
        <input type="text" name="poster"  id="poster" value='<%=post.poster%>' > 
        <br>

        <label for="content"> Edit content</label>
        <input type="text" name="content" value="<%= post.content %>">

        <input type="submit" name="submit-edit" value="Finish Edit">
        </form>
    </div> 
</body>
</html>


app.get("/edit/poster/:id", (req, res) => {
    Post.findById(req.params.id, (err, thePost) => {
        res.render("edit.ejs", {
            post:thePost
        })
    })
})

// route to update posts after being edited on edit.ejs
app.put('/updatePostById/:id',(req,res) => {

    Post.findByIdAndUpdate(req.params.id, req.body, {new:true}, (error,updatedPost) => {
        res.redirect('/index')
    })
})
