<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <title>Social Media</title>
</head>
<body>
    <nav class="main-nav"> <div class="links"><form action="/logout" method="POST"> <input class="btn btn-primary" type="submit" name="logout" value="Log Out"></form>  

        <a class="btn btn-primary" href="/show/<%= id %>"> My Posts</a>
        </div>
        </nav>

        
       

        <div class="indexContent">
    <div class="index-header">
    <h1>welcome, <%= user %> </h1>

    <div class="makePost mb-3">
        <form action="/makePost" method="POST" novalidate class="validateForm"> 
             
          <label for="content"> Update Here</label>
          <textarea name="content" class="form-control" id="exampleFormControlTextarea1 content" rows="3" cols="3" required></textarea>
          

          <input type="submit" name="submit" class="btn btn-primary" >
        
        </form>
    </div>
</div>

    <div class="postContent">

    <% for ( let i= post.length-1; i>=0; i-- ){ %>
        

            <div class="singlePost shadow p-3  rounded">
           <h4>  <%=  post[i].poster %>  </h4>
           <p>  <%= post[i].content %> </p>

           <span class="time"><%= String(post[i].createdAt).substring(0,24) %> </span>
            

            <!-- doesnt work. maybe try it again later. THIS IS SUPPOSED TO BE MY LIKES AND DISLIKES -->
            <!-- <form action="/likes" method="POST">
                <ion-icon name="arrow-up-circle">
                 <input type="radio" name="like" id="">
                </ion-icon>
                <ion-icon name="arrow-down-circle">
                    <input type="radio" name="dislike" id="">
                </ion-icon>

            </form> -->
            <!-- EDIT POST FORM -->

            <!-- needs to be == not === because they're stored differently -->
            <% if (post[i].user == id ) { %>
                <div class="editAndDelete">
            <form action="/edit/poster/<%= post[i].id%>" method="GET">
                <input type="submit" class="btn btn-success" name="Edit Here" value="Edit">
            </form>
            <!-- DELETE POST FORM -->
            <form action="/deleteById/<%= post[i].id %>?_method=DELETE" method="POST">
            <input type="submit" class="btn btn-danger" name="delete" value="Delete"></form>
                </div>
        
            
            <% } %> 
        </div>
        
    <% } %>
    </div>
</div>
    
    

<script>
    (function() {
  'use strict';
  window.addEventListener('load', function() {
    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    let forms = document.getElementsByClassName('validateForm');
    // Loop over them and prevent submission
    let validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });
  }, false);
})();

</script>
    <script
      type="module"
      src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
    ></script>
    
</body>
</html>